
<!DOCTYPE html>
<html>
<head>
  <title>Landroid Cloud – Data Collector</title>
  <style>
    body { font-family: sans-serif; max-width: 900px; margin: auto; }
    button { padding: 10px; margin-top: 10px; }
  </style>
</head>
<body>
<h1>Landroid Cloud – Data Collector</h1>

<p>
<strong>Your credentials are NEVER stored.</strong><br>
They are used only in memory for this active capture session and are discarded
immediately when the session stops or expires.
</p>

<label>Email</label><br>
<input id="email"><br><br>

<label>Password</label><br>
<input id="password" type="password"><br><br>

<label>Brand</label><br>
<select id="brand">
  <option value="worx">Worx Landroid</option>
  <option value="kress">Kress</option>
  <option value="landxcape">LandXcape</option>
</select><br><br>

<label>
  <input type="checkbox" id="consent">
  I understand that my credentials are not stored and are used only for this temporary capture session
</label><br><br>

<button onclick="start()">Start Capture</button>
<button onclick="stop()">Stop Capture</button>
<button onclick="download()">Download ZIP</button>

<pre id="out"></pre>

<script>
let sid = null;

async function start() {
  if (!consent.checked) {
    alert("Consent is required");
    return;
  }

  const res = await fetch("/api/sessions/start", {
    method: "POST",
    headers: {"Content-Type": "application/json"},
    body: JSON.stringify({
      email: email.value,
      password: password.value,
      brand: brand.value,
      hours: 2
    })
  });
  const j = await res.json();
  sid = j.session_id;
  out.innerText = JSON.stringify(j, null, 2);
}

async function stop() {
  await fetch(`/api/sessions/${sid}/stop`, {method: "POST"});
  out.innerText = "Stopped";
}

async function download() {
  const r = await fetch(`/api/sessions/${sid}/download`);
  out.innerText = await r.text();
}
</script>
</body>
</html>
